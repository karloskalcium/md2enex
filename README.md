# md2enex

`md2enex` is a Python command-line tool that converts a directory of markdown files to an Evernote `.enex` export format, that can then be imported into Evernote. It preserves file titles, creation dates and modification dates, and most formatting.

This can be used to import notes from other tools into Evernote.

## Install and run

### Install python, pipx, and md2enex

1. Install python 3.10 or later: [Instructions](https://www.python.org/downloads/)
1. Install pipx: [Instructions](https://pipx.pypa.io/stable/installation/)
1. Install md2enex with pipx:

```commandline
pipx install git+https://github.com/karloskalcium/md2enex.git
```

## Using the tool

```commandline
md2enex DIRECTORY {-o OUTPUT_FILE}
```

Note: `DIRECTORY` should be a directory containing all of the .md files you want to import. This does not work recursively, so all files must be in the top-level of the directory.

The resultant `.enex` file can be imported into Evernote using the import feature.

## Markdown formatting notes

This tool uses [`pandoc`](https://pandoc.org/) to convert Markdown to HTML, and then converts that HTML to [ENML](http://xml.evernote.com/pub/enml2.dtd) (stripping some tags in the process), and then embeds this into the [ENEX](http://xml.evernote.com/pub/evernote-export4.dtd) import/export format created by Evernote.

I used [`Exporter`](http://falcon.star-lord.me/exporter/) to export notes from Apple Notes app, and since `Exporter` does not add newlines to Markdown, `md2enex` uses the `markdown+hard_line_breaks` option of `pandoc` to ensure proper line spacing; if your Markdown line spacing is correct in the source Markdown files you may want to remove that option in the code.

Additionally, `Exporter` adds the title of the note as a top-level header in the note itself. This is not needed in Evernote, so if the first line of a note is a `<h1>` header, it is removed.

The HTML generated by the markdown will be validated against the Evernote DTD. If validation fails, the file will be skipped. Additionally, `img` and `figure` tags will be detected and if found, the file will be skipped, as embedded media is not supported by this converter.

A warning: Evernote can be finicky about notes; I have noticed that if notes have any unknown/unsupported tags in them, they can succesfully import, and then they will disappear silently at some point (perhaps when they sync to the server?). So even though this tool tries to validate the import against the Evernote DTD, to be extra safe, check the number of notes at import, and confirm that same number of notes remains in Evernote after syncing / refreshing/closing/restarting. If notes disappear, it's probably because of some strange syntax that made its way from Markdown into the generated HTML and that Evernote does not accept.

## Bugs, feature requests, or contributions

Open an [Issue](https://github.com/karloskalcium/md2enex/issues). Pull requests welcome.

You can also ask a question in the [discussions section](https://github.com/karloskalcium/md2enex/discussions).

## Other tools

- https://github.com/akosbalasko/yarle  "Yarle - The ultimate converter of Evernote notes to Markdown"
- https://github.com/wormi4ok/evernote2md "Convert Evernote .enex files to Markdown"
