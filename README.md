# md2enex
`md2enex` is a Python command-line tool that converts a directory of markdown files to an Evernote `.enex` export format, that can then be imported into Evernote. It preserves file titles, creation dates and modification dates.

This can be used to import notes from other tools into Evernote.

## Markdown formatting notes
This tool uses `pandoc` to convert Markdown to HTML, and then embeds that HTML in the enex format created by Evernote. I used [`Exporter`](https://apps.apple.com/us/app/exporter/id1099120373?mt=12) to export notes from Apple Notes app, and since `Exporter` does not add newlines to Markdown, `md2enex` uses the `markdown+hard_line_breaks` option of `pandoc` to ensure proper line spacing; if your Markdown line spacing is correct in the source Markdown files you may want to remove that option in the code.

Additionally, `Exporter` adds the title of the note as a top-level header in the note itself. This is not needed in Evernote, so if the first line of a note is a `<h1>` header, it is removed.

The HTML generated by the markdown will be validated against the Evernote DTD. If validation fails, the file will be skipped. Additionally, `img` and `figure` tags will be detected and if found, the file will be skipped, as embedded media is not supported by this converter.

## Install and run

### Clone repo
  `$ git clone https://github.com/karloskalcium/md2enex.git`

### Install pandoc
  `$ brew install pandoc`

### Create and configure virtual environment.
Make sure you have the correct version of python. [Pyenv](https://github.com/pyenv/pyenv) manages python versions.
  1. `pyenv install 3.10.6` (use version in `.python-version`)
  2. Make sure to configure your shell's environment for pyenv following instructions in step 2
    [here](https://github.com/pyenv/pyenv#basic-github-checkout).
  3. Once this is done, start a new shell and run `pyenv version` and `python --version` in the terminal from the root directory of the project, both should read `3.10.6`

### *nix / OSX
 ```
  $ make python-install
  $ source ENV/bin/activate
 ```

### Run the tool
```
  $ ./md2enex.py -d <directory> -o <output filename>
```

## Bugs, feature requests, or contributions
Open an [Issue](https://github.com/karloskalcium/md2enex/issues). Pull requests welcome.
